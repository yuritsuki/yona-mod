New abilities:
  pikemen (double damage to cavalry);
  marksmen (aimed shot - ESC to switch to targeting mode. 300% damage at targeted hex)
  cavaliers (20% damage bonus per hex);
  swordsmen (ignore 50% of physical damage in defense state);
  orcs (damage depends on distance);
New battle log hint.

----------------------
  Details
----------------------

Features: 
 New battle log hint in heroes style describing possible kill count, average values, fatality values and new abilities used in attack. 

 New abilities: 
 [+] Pikeman / Halberdier ignore cavalry bonus and inflict 200% damage to cavalry: 
 Cavaliers
 Champions 
 Centaurs 
 Captains Centaurs  
 Unicorns 
 Battle Unicorns
 Black Knights 
 Death Knights 
 Nomads 
 Sylvan centaurs 
 Hell Steeds 
 Nightmares 
 AI: Active. 

 [+] Cavaliers / Champions get 20% damage bonus per hex instead of the original 5%.  Bonus accumulates with other bonuses like attack modifier, offense skill and so on.
 AI: Active. 

 [+] Swordsmen / Crusaders ignore 50% of physical damage in a state of defense.
 AI: Passive. 

 [+] Damage of Orcs / Orc-chieftains (throwing axes) depends quadratically on the distance to the target.
 Formula: Base damage * (19 - distance) ^ 2 / 100%. 
 AI: Active.
 
* * *

In the fifth version about 60% of code was rewritten, a few non critical bugs dealing with game mechanics were fixed. Yona is quite tolerant to other mods, passively and first adds hints in battle log dialog, does not activate special ability on ESC if cursor is blocked via ERM (mostly, cursor is locked when emulation of new abilities or spells is implemented in custom mod).

 Now three files with the following contents are responsible for configuration:

creature descriptions.txt
 0="Anti-cavalry: 200%. Ignores cavalry bonus";
 1="Anti-cavalry: 200%. Ignores cavalry bonus";
 2="Aimed shot: 300%";
 3="Aimed shot: 300%. Shoots twice";
 6="Block: 50%";
 7="Block: 50%. Strikes twice";
 10="Cavalry: +20% dmg per hex";
 11="Cavalry: +20% dmg per hex";
 88="Damage depends on distance";
 89="Damage depends on distance";

 It allows to assign any description to any creature by its id.

lang.ini
 []
 ANTICAVALRY_BONUS = Anti-cavalry: ~Multiplier~%
 CAVALRY_BONUS = Cavalry: +~Damage~% 
 DEFENSIVE_BLOCK_BONUS = Block: ~Multiplier~%
 DISTANCE_DEPENDANT_ATTACK_BONUS = Modifier: ~Modifier~%
 AIMED_SHOT_BONUS = Aimed shot: ~Multiplier~%

 DISTANCE_HINT = Distance: ~Distance~

 AIMED_SHOT_ACTION_LOG = ~Num~ ~Name~ take aim
 AIMED_SHOT_HINT = Take aim

 It became easy to translate texts to target language or change hints format.

settings.ini
 []
 ; Main
 Debug = 0
 NewCreatureAbilities = 1

 ; Debug
 DebugStackToStackDamage = 1

 The number of options was severely reduced, because their previous quantity used to increase efforts for adding anything new.

 The feature of this release is "aimed shot" ability. It's activated by archers and marksmen on their turn by pressing ESC key (all checks for permission of this activation at current moment present). New ability support network gaming too. Stack choses a hex to aim at. Damage for this particular hex will be tripled in the next turn, if the possibility and willing to attack remain. The ability uses two cursors (thanks to Valery, cursors are replaced on the fly using redirection mechanism) and sound of activation.

 AI is currently absent, but planned.